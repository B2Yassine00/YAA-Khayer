{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"src/app/services/auth.service\";\nimport * as i3 from \"src/app/services/token-storage.service\";\nimport * as i4 from \"@angular/router\";\nclass LoginComponent {\n  constructor(formBuilder, authService, tokenStorage, router) {\n    this.formBuilder = formBuilder;\n    this.authService = authService;\n    this.tokenStorage = tokenStorage;\n    this.router = router;\n    this.isLoggedIn = false;\n    this.isLoginFailed = false;\n    this.errorMessage = '';\n    this.roles = [];\n  }\n  ngOnInit() {\n    this.LoginFormGroup = this.formBuilder.group({\n      username: [''],\n      password: ['']\n    });\n  }\n  onSubmit() {\n    this.loginResponse = JSON.parse(JSON.stringify(this.LoginFormGroup.value));\n    console.log(this.loginResponse);\n    this.authService.login(this.loginResponse.username, this.loginResponse.password).subscribe({\n      next: data => {\n        console.log(data);\n        this.tokenStorage.saveToken(data.token);\n        this.tokenStorage.saveUser(data);\n        this.isLoginFailed = false;\n        this.isLoggedIn = true;\n        this.roles = this.tokenStorage.getUser().role;\n        console.log(this.tokenStorage.getUser().role);\n        this.router.navigateByUrl(\"/add-individu\");\n      },\n      error: err => {\n        this.errorMessage = err.error.message;\n        this.isLoginFailed = true;\n      }\n    });\n  }\n  reloadPage() {\n    window.location.reload();\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.TokenStorageService), i0.ɵɵdirectiveInject(i4.Router));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 33,\n  vars: 1,\n  consts: [[1, \"bg-gray-100\", \"dark:bg-gray-900\"], [1, \"flex\", \"flex-col\", \"items-center\", \"justify-center\", \"px-6\", \"py-8\", \"mx-auto\", \"md:h-screen\", \"lg:py-0\"], [\"routerLink\", \"/\", 1, \"p-2.5\", \"mt-1\", \"flex\", \"items-center\", \"rounded-md\"], [1, \"font-bold\", \"text-4xl\", \"uppercase\", \"p-4\", \"text-gray-500\", \"border-gray-100\"], [1, \"w-full\", \"bg-white\", \"rounded-lg\", \"shadow\", \"dark:border\", \"md:mt-0\", \"sm:max-w-md\", \"xl:p-0\", \"dark:bg-gray-800\", \"dark:border-gray-700\"], [1, \"p-6\", \"space-y-4\", \"md:space-y-6\", \"sm:p-8\"], [1, \"text-xl\", \"font-bold\", \"leading-tight\", \"tracking-tight\", \"text-gray-900\", \"md:text-2xl\", \"dark:text-white\"], [1, \"space-y-4\", \"md:space-y-6\", 3, \"formGroup\", \"ngSubmit\"], [\"for\", \"email\", 1, \"block\", \"mb-2\", \"text-sm\", \"font-medium\", \"text-gray-900\", \"dark:text-white\"], [\"type\", \"email\", \"formControlName\", \"username\", \"id\", \"email\", \"placeholder\", \"your username\", \"required\", \"\", 1, \"bg-gray-50\", \"border\", \"border-gray-300\", \"text-gray-900\", \"sm:text-sm\", \"rounded-lg\", \"focus:ring-primary-600\", \"focus:border-primary-600\", \"block\", \"w-full\", \"p-2.5\", \"dark:bg-gray-700\", \"dark:border-gray-600\", \"dark:placeholder-gray-400\", \"dark:text-white\", \"dark:focus:ring-blue-500\", \"dark:focus:border-blue-500\"], [\"for\", \"password\", 1, \"block\", \"mb-2\", \"text-sm\", \"font-medium\", \"text-gray-900\", \"dark:text-white\"], [\"type\", \"password\", \"formControlName\", \"password\", \"id\", \"password\", \"placeholder\", \"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\", \"required\", \"\", 1, \"bg-gray-50\", \"border\", \"border-gray-300\", \"text-gray-900\", \"sm:text-sm\", \"rounded-lg\", \"focus:ring-primary-600\", \"focus:border-primary-600\", \"block\", \"w-full\", \"p-2.5\", \"dark:bg-gray-700\", \"dark:border-gray-600\", \"dark:placeholder-gray-400\", \"dark:text-white\", \"dark:focus:ring-blue-500\", \"dark:focus:border-blue-500\"], [1, \"flex\", \"items-center\", \"justify-between\"], [1, \"flex\", \"items-start\"], [1, \"flex\", \"items-center\", \"h-5\"], [\"id\", \"remember\", \"aria-describedby\", \"remember\", \"type\", \"checkbox\", \"required\", \"\", 1, \"w-4\", \"h-4\", \"border\", \"border-gray-300\", \"rounded\", \"bg-gray-50\", \"focus:ring-3\", \"focus:ring-primary-300\", \"dark:bg-gray-700\", \"dark:border-gray-600\", \"dark:focus:ring-primary-600\", \"dark:ring-offset-gray-800\"], [1, \"ml-3\", \"text-sm\"], [\"for\", \"remember\", 1, \"text-gray-500\", \"dark:text-gray-300\"], [\"href\", \"#\", 1, \"text-sm\", \"font-medium\", \"text-gray-700\", \"hover:underline\", \"dark:text-primary-500\"], [\"type\", \"submit\", 1, \"w-full\", \"text-white\", \"bg-gray-600\", \"hover:bg-gray-700\", \"focus:ring-4\", \"focus:outline-none\", \"focus:ring-primary-300\", \"font-medium\", \"rounded-lg\", \"text-sm\", \"px-5\", \"py-2.5\", \"text-center\", \"dark:bg-primary-600\", \"dark:hover:bg-primary-700\", \"dark:focus:ring-primary-800\"], [1, \"text-sm\", \"font-light\", \"text-gray-500\", \"dark:text-gray-400\"], [\"href\", \"/register-form\", 1, \"font-medium\", \"text-gray-700\", \"hover:underline\", \"dark:text-primary-500\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"a\", 2)(3, \"h1\", 3);\n      i0.ɵɵtext(4, \"YAA KHAYER\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"div\", 4)(6, \"div\", 5)(7, \"h1\", 6);\n      i0.ɵɵtext(8, \" Sign in to your account \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"form\", 7);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_9_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelementStart(10, \"div\")(11, \"label\", 8);\n      i0.ɵɵtext(12, \"Username\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(13, \"input\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"div\")(15, \"label\", 10);\n      i0.ɵɵtext(16, \"Password\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(17, \"input\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"div\", 12)(19, \"div\", 13)(20, \"div\", 14);\n      i0.ɵɵelement(21, \"input\", 15);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"div\", 16)(23, \"label\", 17);\n      i0.ɵɵtext(24, \"Remember me\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(25, \"a\", 18);\n      i0.ɵɵtext(26, \"Forgot password?\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(27, \"button\", 19);\n      i0.ɵɵtext(28, \"Sign in\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(29, \"p\", 20);\n      i0.ɵɵtext(30, \" Don't have an account yet? \");\n      i0.ɵɵelementStart(31, \"a\", 21);\n      i0.ɵɵtext(32, \"Sign up\");\n      i0.ɵɵelementEnd()()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"formGroup\", ctx.LoginFormGroup);\n    }\n  },\n  dependencies: [i4.RouterLink, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.FormGroupDirective, i1.FormControlName],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport { LoginComponent };","map":{"version":3,"names":["LoginComponent","constructor","formBuilder","authService","tokenStorage","router","isLoggedIn","isLoginFailed","errorMessage","roles","ngOnInit","LoginFormGroup","group","username","password","onSubmit","loginResponse","JSON","parse","stringify","value","console","log","login","subscribe","next","data","saveToken","token","saveUser","getUser","role","navigateByUrl","error","err","message","reloadPage","window","location","reload","i0","ɵɵdirectiveInject","i1","FormBuilder","i2","AuthService","i3","TokenStorageService","i4","Router","selectors","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","LoginComponent_Template_form_ngSubmit_9_listener","ɵɵelement","ɵɵadvance","ɵɵproperty"],"sources":["C:\\Users\\pc\\OneDrive\\Desktop\\ENSIAS-2A\\s4\\cours\\JEE\\YAA-Khayer\\Frontend\\yaa-khayer-front\\src\\app\\components\\login\\login.component.ts","C:\\Users\\pc\\OneDrive\\Desktop\\ENSIAS-2A\\s4\\cours\\JEE\\YAA-Khayer\\Frontend\\yaa-khayer-front\\src\\app\\components\\login\\login.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { LoginResponse } from 'src/app/entities/login-response';\r\nimport { AuthService } from 'src/app/services/auth.service';\r\nimport { TokenStorageService } from 'src/app/services/token-storage.service';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.css']\r\n})\r\nexport class LoginComponent implements OnInit {\r\n  \r\n  LoginFormGroup!: FormGroup;\r\n  loginResponse!: LoginResponse;\r\n\r\n  isLoggedIn = false;\r\n  isLoginFailed = false;\r\n  errorMessage = '';\r\n  roles: string[] = [];\r\n  \r\n  constructor(private formBuilder: FormBuilder,\r\n              private authService: AuthService,\r\n              private tokenStorage: TokenStorageService,\r\n              private router: Router){}\r\n\r\n  ngOnInit(): void {\r\n    this.LoginFormGroup=this.formBuilder.group({\r\n      username: [''],\r\n      password: ['']\r\n    });\r\n\r\n  }\r\n\r\n  onSubmit(){\r\n\r\n    this.loginResponse = JSON.parse(JSON.stringify(this.LoginFormGroup.value));\r\n    console.log(this.loginResponse);\r\n    this.authService.login(this.loginResponse.username, this.loginResponse.password).subscribe({\r\n      next: data => {\r\n        console.log(data);\r\n        this.tokenStorage.saveToken(data.token);\r\n        this.tokenStorage.saveUser(data);\r\n\r\n        this.isLoginFailed = false;\r\n        this.isLoggedIn = true;\r\n        this.roles = this.tokenStorage.getUser().role;\r\n        console.log(this.tokenStorage.getUser().role);\r\n        this.router.navigateByUrl(\"/add-individu\");\r\n      },\r\n      error: err => {\r\n        this.errorMessage = err.error.message;\r\n        this.isLoginFailed = true;\r\n      }\r\n    });\r\n\r\n    \r\n\r\n  }\r\n\r\n  reloadPage(): void {\r\n    window.location.reload();\r\n  }\r\n\r\n\r\n}\r\n","<section class=\"bg-gray-100 dark:bg-gray-900\">\r\n    <div class=\"flex flex-col items-center justify-center px-6 py-8 mx-auto md:h-screen lg:py-0\">\r\n        <a routerLink=\"/\" class=\"p-2.5 mt-1 flex items-center rounded-md\">\r\n            <!--<i class=\"bi bi-app-indicator px-2 py-1 bg-blue-600 rounded-md\"></i>-->\r\n            <h1 class=\"font-bold text-4xl uppercase p-4 text-gray-500 border-gray-100\">YAA KHAYER</h1>\r\n            <!--<i class=\"bi bi-x ml-20 cursor-pointer lg:hidden\" (click)=\"OnSideChange()\"></i>-->\r\n          </a>\r\n        <div class=\"w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700\">\r\n            <div class=\"p-6 space-y-4 md:space-y-6 sm:p-8\">\r\n                <h1 class=\"text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white\">\r\n                    Sign in to your account\r\n                </h1>\r\n                <form class=\"space-y-4 md:space-y-6\" [formGroup]=\"LoginFormGroup\" (ngSubmit)=\"onSubmit()\">\r\n                    <div>\r\n                        <label for=\"email\" class=\"block mb-2 text-sm font-medium text-gray-900 dark:text-white\">Username</label>\r\n                        <input type=\"email\" formControlName=\"username\" id=\"email\" class=\"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\" placeholder=\"your username\" required=\"\">\r\n                    </div>\r\n                    <div>\r\n                        <label for=\"password\" class=\"block mb-2 text-sm font-medium text-gray-900 dark:text-white\">Password</label>\r\n                        <input type=\"password\" formControlName=\"password\" id=\"password\" placeholder=\"••••••••\" class=\"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\" required=\"\">\r\n                    </div>\r\n                    <div class=\"flex items-center justify-between\">\r\n                        <div class=\"flex items-start\">\r\n                            <div class=\"flex items-center h-5\">\r\n                              <input id=\"remember\" aria-describedby=\"remember\" type=\"checkbox\" class=\"w-4 h-4 border border-gray-300 rounded bg-gray-50 focus:ring-3 focus:ring-primary-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:ring-primary-600 dark:ring-offset-gray-800\" required=\"\">\r\n                            </div>\r\n                            <div class=\"ml-3 text-sm\">\r\n                              <label for=\"remember\" class=\"text-gray-500 dark:text-gray-300\">Remember me</label>\r\n                            </div>\r\n                        </div>\r\n                        <a href=\"#\" class=\"text-sm font-medium text-gray-700 hover:underline dark:text-primary-500\">Forgot password?</a>\r\n                    </div>\r\n                    <button type=\"submit\" class=\"w-full text-white bg-gray-600 hover:bg-gray-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800\">Sign in</button>\r\n                    <p class=\"text-sm font-light text-gray-500 dark:text-gray-400\">\r\n                        Don't have an account yet? <a href=\"/register-form\" class=\"font-medium text-gray-700 hover:underline dark:text-primary-500\">Sign up</a>\r\n                    </p>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  </section>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}